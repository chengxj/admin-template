<div class="page-title" ed-page-title>
    <h4> <span>{{'title.sys.user' | translate}}</span></h4>
    <nav>
        <span class="fa fa-home"></span>
        <a href="javascript:;">{{'title.common.home' | translate}}</a>
        <span class="fa fa-angle-right"></span>
        <a href="#/sys/user/list">{{'title.sys.user' | translate}}</a>
        <span class="fa fa-angle-right"></span>
        <a href="javascript:;">{{'title.sys.user.add' | translate}}</a>
    </nav>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <header class="panel-heading">{{'header.sys.user.info' | translate}}
                <div class="pull-right">
                    <a href="javascript:;" class="btn btn-xs btn-link" ed-reload
                       reload-fun="reload()">
                        <i class="fa fa-refresh"></i>
                    </a>
                </div>
            </header>
            <div class="panel-body">
                <form role="form" class="form-horizontal" name="form" novalidate>
                    <div class="form-body">
                        <div class="form-group"
                             ng-class="{'has-error': form.username.$dirty && form.username.$invalid}">
                            <label class="col-md-3 control-label">{{'label.sys.user.username' | translate}}<span
                                    class="symbol required"></span></label>

                            <div class="col-md-5">
                                <input type="text" id="username" name="username" class="form-control"
                                       ng-model="user.username" ed-focus required ng-minlength=3 ng-maxlength=16
                                       ng-pattern="/^[a-zA-Z][0-9a-zA-Z_]*$/" ed-ensure-unique="sys/user/check/username">
                                <span class='help-block'
                                      ng-show="form.username.$error.required && form.username.$focused">{{'help.common.required' | translate}}</span>
                                <span class='help-block'
                                      ng-show="form.username.$error.pattern && form.username.$focused">{{'help.sys.user.username.pattern' | translate}}</span>
                                <span class='help-block'
                                      ng-show="(form.username.$error.minlength || form.username.$error.maxlength) && form.username.$focused">{{'help.sys.user.username.length' | translate}}</span>
                                <span class='help-block'
                                      ng-show="form.username.$error.unique && form.username.$focused">{{'help.sys.user.username.unique' | translate}}</span>
                            </div>
                        </div>
                        <div class="form-group"
                             ng-class="{'has-error': form.password.$dirty && form.password.$invalid}">
                            <label class="col-md-3 control-label">{{'label.sys.user.password' | translate}}<span
                                    class="symbol required"></span></label>

                            <div class="col-md-5">
                                <input type="password" id="password" name="password" class="form-control"
                                       ng-model="user.password" ed-focus required ng-minlength=6 ng-maxlength=16>
                                <span class='help-block'
                                      ng-show="form.password.$error.required && form.password.$focused">{{'help.common.required' | translate}}</span>
                                <span class='help-block'
                                      ng-show="(form.password.$error.minlength || form.password.$error.maxlength) && form.password.$focused">{{'help.sys.user.password.length' | translate}}</span>
                            </div>
                        </div>
                        <div class="form-group"
                             ng-class="{'has-error': form.fullName.$dirty && form.fullName.$invalid}">
                            <label class="col-md-3 control-label">{{'label.sys.user.fullname' | translate}}<span
                                    class="symbol required"></span></label>

                            <div class="col-md-5">
                                <input type="text" id="fullName" name="fullName" class="form-control"
                                       ng-model="user.fullName" ed-focus required ng-maxlength="32">
                                <span class='help-block'
                                      ng-show="form.fullName.$error.required && form.fullName.$focused">{{'help.common.required' | translate}}</span>
                                <span class='help-block'
                                      ng-show="form.fullName.$error.maxlength && form.fullName.$focused">{{'help.common.maxlength32' | translate}}</span>
                            </div>
                        </div>
                        <div class="form-group" ng-class="{'has-error': form.email.$dirty && form.email.$invalid}">
                            <label class="col-md-3 control-label">{{'label.sys.user.email' | translate}}</label>

                            <div class="col-md-5">
                                <input type="email" id="email" name="email" class="form-control" ng-model="user.email"
                                       ed-focus ng-maxlength="64">
                                <span class='help-block'
                                      ng-show="form.email.$error.email && form.email.$focused">{{'help.common.email' | translate}}</span>
                                <span class='help-block'
                                      ng-show="form.email.$error.maxlength && form.email.$focused">{{'help.common.maxlength64' | translate}}</span>
                            </div>
                        </div>

                        <div class="form-group" ng-class="{'has-error': form.roles.$dirty && form.roles.$invalid}">
                            <label class="col-md-3 control-label">{{'label.sys.user.role' | translate}}<span
                                    class="symbol required"></span></label>

                            <div class="col-md-5">
                                <input class="form-control select2" name="roles" ng-model="user.roleIds" ed-multi-select options="options"
                                       ed-focus required>
                                <span class='help-block'
                                      ng-show="form.roles.$error.required && form.roles.$focused">{{'help.common.required' | translate}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <div class="col-md-offset-3 col-md-9">
                            <button class="btn btn-blue" type="button" ng-disabled="form.$invalid || isUnchanged() || clickToken" ng-click="save()" ed-perm perm="sys:user:create">
                                <i class="fa fa-check"></i>
                                {{'label.common.op.save' | translate}}
                            </button>
                            <label class="blank5 pull-right"></label>
                            <a class="btn btn-default" type="button"
                               href="#/sys/user/list"><i class="fa fa-undo"></i> {{'label.common.op.cancel' | translate}}</a>
                        </div>
                    </div>
                </form>
        </div>
    </div>
</div>
</div>